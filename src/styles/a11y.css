/* 접근성 (Accessibility) 스타일 */

/* 포커스 링 */
.focus-visible {
  outline: 2px solid #1976d2;
  outline-offset: 2px;
}

/* 키보드 네비게이션을 위한 포커스 스타일 */
*:focus-visible {
  outline: 2px solid #1976d2 !important;
  outline-offset: 2px;
}

/* 버튼 포커스 스타일 */
button:focus-visible,
[role="button"]:focus-visible {
  outline: 2px solid #1976d2;
  outline-offset: 2px;
  box-shadow: 0 0 0 4px rgba(25, 118, 210, 0.12);
}

/* 링크 포커스 스타일 */
a:focus-visible {
  outline: 2px solid #1976d2;
  outline-offset: 2px;
  text-decoration: underline;
}

/* 입력 필드 포커스 스타일 - MUI TextField와 충돌 방지 */
input:focus-visible:not(.MuiInputBase-input),
textarea:focus-visible:not(.MuiInputBase-input),
select:focus-visible:not(.MuiInputBase-input) {
  outline: 2px solid #1976d2;
  outline-offset: 2px;
  border-color: #1976d2;
}

/* 스크린 리더 전용 텍스트 */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* 스크린 리더 전용 텍스트 (포커스시 표시) */
.sr-only-focusable:focus {
  position: static;
  width: auto;
  height: auto;
  padding: inherit;
  margin: inherit;
  overflow: visible;
  clip: auto;
  white-space: normal;
}

/* 고대비 색상 (다크 모드) - MUI 컴포넌트 제외 */
@media (prefers-contrast: high) {
  *:not(.MuiInputBase-root):not(.MuiOutlinedInput-root):not(.MuiTextField-root) {
    border-color: currentColor !important;
  }
  
  button:not(.MuiButton-root),
  [role="button"]:not(.MuiButton-root) {
    border: 2px solid currentColor !important;
  }
}

/* 감소된 모션 설정 */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* 키보드 네비게이션 힌트 */
.keyboard-hint {
  font-size: 0.75rem;
  color: rgba(0, 0, 0, 0.6);
  font-style: italic;
}

[data-theme="dark"] .keyboard-hint {
  color: rgba(255, 255, 255, 0.6);
}

/* 스킵 링크 */
.skip-link {
  position: absolute;
  top: -40px;
  left: 6px;
  background: #1976d2;
  color: white;
  padding: 8px;
  text-decoration: none;
  border-radius: 4px;
  z-index: 9999;
  font-size: 14px;
}

.skip-link:focus {
  top: 6px;
}

/* 아리아 라벨이 있는 요소들의 시각적 힌트 - MUI 컴포넌트 제외 */
[aria-label]:not(.MuiSelect-root):not(.MuiInputBase-root):not(.MuiFormControl-root):not(.MuiTextField-root):not(.MuiOutlinedInput-root):hover::after,
[aria-labelledby]:not(.MuiSelect-root):not(.MuiInputBase-root):not(.MuiFormControl-root):not(.MuiTextField-root):not(.MuiOutlinedInput-root):hover::after {
  content: attr(aria-label);
  position: absolute;
  background: rgba(0, 0, 0, 0.8);
  color: white;
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 12px;
  white-space: nowrap;
  z-index: 1000;
  pointer-events: none;
  margin-top: 4px;
}

/* MUI 컴포넌트의 aria-label 툴팁 완전 비활성화 */
.MuiSelect-root:hover::after,
.MuiInputBase-root:hover::after,
.MuiFormControl-root:hover::after,
.MuiTextField-root:hover::after,
.MuiOutlinedInput-root:hover::after,
.MuiInputLabel-root:hover::after,
.MuiSelect-select:hover::after,
.MuiFormControl-root *:hover::after,
.MuiTextField-root *:hover::after,
.MuiSelect-root *:hover::after {
  display: none !important;
  content: none !important;
}

/* MUI 컴포넌트 내부의 모든 요소에서 툴팁 비활성화 */
[class*="Mui"]:hover::after,
[class*="Mui"] *:hover::after {
  display: none !important;
  content: none !important;
}

/* 색상 대비 개선 */
.text-low-contrast {
  color: #666;
}

[data-theme="dark"] .text-low-contrast {
  color: #aaa;
}

/* 터치 타겟 최소 크기 보장 - 텍스트 입력 필드 제외 */
button:not(.MuiButton-root),
[role="button"]:not(.MuiButton-root),
input[type="checkbox"],
input[type="radio"],
a {
  min-height: 44px;
  min-width: 44px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

/* MUI 버튼은 별도 처리 */
.MuiButton-root {
  min-height: 36px;
}

/* 데이터 그리드 접근성 개선 */
.data-grid-cell:focus {
  outline: 2px solid #1976d2;
  outline-offset: -2px;
}

.data-grid-row[aria-selected="true"] {
  background-color: rgba(25, 118, 210, 0.08);
}

[data-theme="dark"] .data-grid-row[aria-selected="true"] {
  background-color: rgba(144, 202, 249, 0.16);
}

/* 폼 필드 에러 상태 */
.form-field-error {
  border-color: #d32f2f !important;
}

.form-field-error:focus {
  outline-color: #d32f2f !important;
  box-shadow: 0 0 0 4px rgba(211, 47, 47, 0.12);
}

/* 로딩 상태 접근성 */
.loading-spinner[aria-label] {
  /* 스크린 리더가 로딩 상태를 인식할 수 있도록 */
}

/* 다이얼로그 접근성 */
.dialog-backdrop {
  background-color: rgba(0, 0, 0, 0.5);
}

.dialog-content:focus {
  outline: none;
}

/* 토글 버튼 접근성 */
.toggle-button[aria-pressed="true"] {
  background-color: #1976d2;
  color: white;
}

.toggle-button[aria-pressed="false"] {
  background-color: transparent;
  color: #1976d2;
  border: 1px solid #1976d2;
}

/* 탭 네비게이션 접근성 */
.tab-list {
  display: flex;
  border-bottom: 1px solid #e0e0e0;
}

.tab-button {
  border: none;
  background: none;
  padding: 12px 16px;
  cursor: pointer;
  border-bottom: 2px solid transparent;
}

.tab-button[aria-selected="true"] {
  border-bottom-color: #1976d2;
  color: #1976d2;
  font-weight: 500;
}

.tab-button:focus-visible {
  outline: 2px solid #1976d2;
  outline-offset: -2px;
}

/* 드롭다운 메뉴 접근성 */
.dropdown-menu {
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  border: 1px solid #e0e0e0;
}

.dropdown-item:focus {
  background-color: rgba(25, 118, 210, 0.08);
  outline: none;
}

.dropdown-item[aria-selected="true"] {
  background-color: rgba(25, 118, 210, 0.12);
  font-weight: 500;
}

/* 알림/토스트 접근성 */
.toast-notification {
  border-left: 4px solid;
}

.toast-notification.error {
  border-left-color: #d32f2f;
}

.toast-notification.success {
  border-left-color: #2e7d32;
}

.toast-notification.warning {
  border-left-color: #ed6c02;
}

.toast-notification.info {
  border-left-color: #0288d1;
}

/* 진행률 표시 접근성 */
.progress-bar {
  background-color: #e0e0e0;
  border-radius: 4px;
  overflow: hidden;
}

.progress-bar-fill {
  height: 100%;
  background-color: #1976d2;
  transition: width 0.3s ease;
}

/* 체크박스/라디오 버튼 접근성 개선 */
.custom-checkbox,
.custom-radio {
  position: relative;
  display: inline-flex;
  align-items: center;
  cursor: pointer;
  min-height: 44px;
}

.custom-checkbox input,
.custom-radio input {
  position: absolute;
  opacity: 0;
}

.custom-checkbox .checkmark,
.custom-radio .checkmark {
  width: 20px;
  height: 20px;
  border: 2px solid #666;
  margin-right: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.custom-checkbox input:checked + .checkmark,
.custom-radio input:checked + .checkmark {
  background-color: #1976d2;
  border-color: #1976d2;
}

.custom-checkbox input:focus + .checkmark,
.custom-radio input:focus + .checkmark {
  outline: 2px solid #1976d2;
  outline-offset: 2px;
}

/* 테이블 접근성 */
.accessible-table {
  border-collapse: collapse;
  width: 100%;
}

.accessible-table th,
.accessible-table td {
  border: 1px solid #e0e0e0;
  padding: 8px 12px;
  text-align: left;
}

.accessible-table th {
  background-color: #f5f5f5;
  font-weight: 600;
}

.accessible-table tr:nth-child(even) {
  background-color: #fafafa;
}

.accessible-table tr:hover {
  background-color: #f0f0f0;
}

/* 반응형 접근성 */
@media (max-width: 768px) {
  .mobile-accessible {
    font-size: 16px; /* iOS 줌 방지 */
  }
  
  button,
  [role="button"] {
    min-height: 48px; /* 모바일에서 더 큰 터치 타겟 */
    min-width: 48px;
  }
}
